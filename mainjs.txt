const themeToggle = document.getElementById("themeToggle");
const root = document.documentElement;

// Load saved theme
const savedTheme = localStorage.getItem("theme");
if (savedTheme) {
  root.setAttribute("data-theme", savedTheme);
  themeToggle.textContent = savedTheme === "dark" ? "â˜€ï¸" : "ðŸŒ™";
}

// Toggle theme
themeToggle.addEventListener("click", () => {
  const currentTheme = root.getAttribute("data-theme");
  const newTheme = currentTheme === "dark" ? "light" : "dark";

  root.setAttribute("data-theme", newTheme);
  localStorage.setItem("theme", newTheme);
  themeToggle.textContent = newTheme === "dark" ? "â˜€ï¸" : "ðŸŒ™";
});

// const searchInput = document.getElementById("toolSearch");

// if (searchInput) {
//   searchInput.addEventListener("input", () => {
//     const query = searchInput.value.toLowerCase();
//     const cards = document.querySelectorAll(".tool-card");

//     cards.forEach(card => {
//       const title = card.querySelector("h3").textContent.toLowerCase();
//       const desc = card.querySelector("p").textContent.toLowerCase();

//       if (title.includes(query) || desc.includes(query)) {
//         card.style.display = "flex";
//       } else {
//         card.style.display = "none";
//       }
//     });
//   });
// }


//Filter + Search Logic (Unified)
let activeCategory = "all";
const searchInput = document.getElementById("toolSearch");

const filterButtons = document.querySelectorAll(".tool-filters button");

filterButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    filterButtons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    activeCategory = btn.dataset.filter;
    applyFilters();
  });
});

if (searchInput) {
  searchInput.addEventListener("input", applyFilters);
}

function applyFilters() {
  const query = searchInput ? searchInput.value.toLowerCase() : "";

  document.querySelectorAll(".tool-card").forEach(card => {
    const title = card.querySelector("h3").textContent.toLowerCase();
    const desc = card.querySelector("p").textContent.toLowerCase();
    const tags = card.dataset.tags.toLowerCase();
    const category = card.dataset.category;

    const matchesSearch =
      title.includes(query) ||
      desc.includes(query) ||
      tags.includes(query);

    const matchesCategory =
      activeCategory === "all" || category === activeCategory;

    card.style.display =
      matchesSearch && matchesCategory ? "flex" : "none";
  });
}


// ..................................................................................
// BACK TO TOP BUTTON WORKING
// Get the button
const backToTopBtn = document.getElementById("backToTop");

// Show button when user scrolls down 300px
window.onscroll = function() {
  if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
    backToTopBtn.style.display = "block";
  } else {
    backToTopBtn.style.display = "none";
  }
};

// When user clicks, scroll to top
backToTopBtn.onclick = function() {
  window.scrollTo({
    top: 0,
    behavior: "smooth" // Smooth scrolling animation
  });
};


// ......................................................................................
// COOKIE CONSENT WORKING
document.addEventListener("DOMContentLoaded", function () {
  const cookieBanner = document.getElementById("cookieBanner");
  const acceptBtn = document.getElementById("acceptCookies");

  // Check if user has already accepted
  if (!localStorage.getItem("cookieAccepted")) {
    setTimeout(() => {
      cookieBanner.classList.add("show");
    }, 2000); // Appear after 2 seconds
  }

  acceptBtn.addEventListener("click", () => {
    cookieBanner.classList.remove("show");
    // Save preference in local storage
    localStorage.setItem("cookieAccepted", "true");
  });
});